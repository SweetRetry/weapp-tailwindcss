import prettier from 'prettier'

describe('format', () => {
  it('prettier format', async () => {
    const code = `<view class="content" style=""><view class="ifdef-_MP-WEIXIN_cbg-blue-500">bg-blue-500</view><view class="ifdef-_H5_uu_MP-WEIXIN_cbg-blue-300">bg-blue-300</view><view class="ifdef-_H5uuMP-WEIXIN_cbg-blue-400">bg-blue-400</view><view class="ifndef-_MP-WEIXIN_cbg-red-500">not bg-red-500</view><view class="ifndef-_H5uuMP-WEIXIN_cbg-red-400">bg-red-400</view><view class="wxcbg-blue-400">wx:bg-blue-400</view><view class="-wxcbg-red-400">-wx:bg-red-400</view><view class="mvcbg-blue-400">mv:bg-blue-400</view><view class="-mvcbg-red-400">-mv:bg-red-400</view><image mode="widthFix" src="https://pic1.zhimg.com/v2-3ee20468f54bbfefcd0027283b21aaa8_720w.jpg" style="width: 529px; height: 220.417px;" class="mt-_96d3px_ Issue228--mt-_96d3px_ w-_61d1px_ Issue228--w-_61d1px_ h-_50d99px_ Issue228--h-_50d99px_" role="img"></image><view>*******</view><n-image is="components/NImage" class="mt-_26d2px_ w-_43d1px_ h-_42d99px_"><image src="https://pic1.zhimg.com/v2-3ee20468f54bbfefcd0027283b21aaa8_720w.jpg" style="" role="img"></image></n-image><image src="https://pic1.zhimg.com/v2-3ee20468f54bbfefcd0027283b21aaa8_720w.jpg" style="" class="mt-_96d3px_ NHostImage--mt-_96d3px_ w-_61d1px_ NHostImage--w-_61d1px_ h-_50d99px_ NHostImage--h-_50d99px_" role="img"></image><view class="_2xlctext-base">2xl:text-base</view><view class="_2xlctext-_red_">2xl:text-[red]</view><view class="space-y-4 flex flex-col bg-red-400"><view class="bg-sky-500">view space-y-4</view><view class="bg-sky-500">view space-y-4</view><text class="bg-sky-500">text space-y-4</text><button class="bg-sky-500" role="button" aria-disabled="false">button space-y-4</button><common-com is="components/CommonCom" class="bg-sky-500"><text>CommonCom space-y-4</text></common-com><view class="bg-sky-500">view space-y-4</view><text class="bg-sky-500">text space-y-4</text><text>VirtualHostCom space-y-4</text><view class="bg-sky-500">view space-y-4</view><text class="bg-sky-500">text space-y-4</text></view><view class="bg-_h3482f2_">bgbgbgbg</view><view class="text-_30rpx_ text-_hfafafa_ font-bold bg-_url_qhttpscssxxxdcomsxxdwebpq__">classArray</view><view class="text-sm text-_hfafafa_">:class="['text-sm', classObj]</view><view class="rotate-_10deg_">rotate1111111</view><view class="td highlight">你好</view><view class="td">1</view><view class="td">2</view><view class="text-_32rpx_ border-_10rpx_">rpx</view><view class="text-_32px_ border-_10px_">px</view><button role="button" aria-disabled="false">显示Tabbar</button><button role="button" aria-disabled="false">隐藏Tabbar</button><view class="itext-primary iborder-primary text-_32px_">1111</view><view class="border-b-_4rpx_ border-t-_4px_ border w-screen h-3 border-_red_"></view><view class="_n_du-count-downw_w_text_citext-red-400"><view></view><view></view><view></view><view></view><view><view class="u-count-down__text">u-count-down__text</view></view></view><button app-parameter="" class="u-button button--u-button u-reset-button button--u-reset-button data-v-5c003edf button--data-v-5c003edf u-button--primary button--u-button--primary u-button--square button--u-button--square u-button--normal button--u-button--normal" data-name="" form-type="" hover-class="u-button--active" hover-start-time="0" hover-stay-time="200" lang="en" open-type="" send-message-img="" send-message-path="" send-message-title="" session-from="" style=";;" role="button" aria-disabled="false" hover-stop-propagation="">主要按钮</button><view class="aftercborder-none">当前系统主题:light</view><view class="bg-gray-100 darkcbg-zinc-800 h-10 w-10" hover-class="bg-red-500 darkcbg-green-500"></view><view class="h-5 w-5 shadow-_0px_2px_11px_0px_rgba_0b0b0b0d4__ beforeccontent-_qFestivusq_"></view><view class="h-5 w-5 shadow-_0px_2px_11px_0px_h00000a_"></view><view class="text-_22px_ darkctext-yellow-400">text-[22px]</view><view class="text-_hbada55_">text-[#bada55]</view><view class="text-_lengthcvar_--my-var-length__">text-[length:var(--my-var-length)]</view><view class="text-_colorcvar_--my-var__">text-[color:var(--my-var)]</view><button class="ibg-green-500 isr-onlytext-white opacity-50" aria-disabled="true" role="button" disabled=""> disable </button><view class="test">test</view><view class="h-_20px_ w-_20px_ bg-_h4268EA_ shadow-indigo-100"></view><view class="h-_20px_ w-_20px_ bg-_h123456_ shadow-blue-100"></view><view class="h-_20px_ w-_20px_ bg-green-500 shadow-green-100"></view><view class="h-_20px_ w-_20px_ bg-cyan-500 shadow-cyan-100"></view><view class="h-_20px_ w-_20px_ bg-amber-500 shadow-amber-100"></view><view class="w-2 h-2 bg-_h123456_"></view><view class="w-2 h-2 bg-blue-500s50"></view><view class="flex items-center justify-center w-screen h-screen"><view class="ifont-bold itext-_h990000_ text-2xl underline">测试标题</view></view><image class="logo h-10 w-10" src="/static/logo.png" role="img"></image><view class="text-area"><text class="title h-_200p_">测试标题</text></view><view class="p-_20px_ -mt-2 mb-_-20px_">p-[20px] -mt-2 mb-[-20px] margin的jit 可不能这么写 -m-[20px]</view><view class="space-y-_1d6rem_"><view class="w-_300rpx_ text-black text-opacity-_0d19_">w-[300rpx] text-black text-opacity-[0.19]</view><view class="min-w-_300rpx_ max-h-_100px_ text-_20px_ leading-_0d9_">min-w-[300rpx] max-h-[100px] text-[20px] leading-[0.9]</view><view class="max-w-_300rpx_ min-h-_100px_ text-_hdddddd_">max-w-[300rpx] min-h-[100px] text-[#dddddd]</view><view class="flex items-center justify-center h-_100px_ w-_100px_ rounded-_40px_ bg-_h123456_ bg-opacity-_0d54_ text-_hffffff_ text-_h123456_ bg-_h666600_">Hello</view><view class="border-_10px_ border-_h098765_ border-solid border-opacity-_0d44_">border-[10px] border-[#098765] border-solid border-opacity-[0.44]</view><view class="grid grid-cols-3 divide-x-_10px_ divide-_h010101_ divide-solid"><view>1</view><view>2</view><view>3</view></view><view class="w-32 py-2 rounded-md font-semibold text-white bg-pink-500 ring-4 ring-pink-300"> Default </view></view></view>`
    // https://prettier.io/docs/en/api.html
    // https://prettier.io/docs/en/options#parser
    const wxml = await prettier.format(code, {
      parser: 'html',
      tabWidth: 2,
      useTabs: false,
      semi: false,
      singleQuote: true,
      endOfLine: 'lf',
      trailingComma: 'none',
      printWidth: 180,
      bracketSameLine: true,
      htmlWhitespaceSensitivity: 'ignore',
    })

    expect(wxml).toMatchSnapshot()
  })
})
